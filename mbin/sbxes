#!/usr/bin/perl

# A perl script to find the IP's of all import sandboxes and output
# them in a form appropriate for the wiki.

my $name = $0; $name =~ s'.*/''; # remove path--like basename
my $usage = "usage:\n$name [-opt1] [-opt2] [-opt3]";
my $sbx;
my $first;
my $last;

while (<DATA>) {
  next if (/^\s*$|^\s*#/); # skip white, blank and commented lines.
  last if (/LAST/);
  my $ip='';
  ($sbx,$first,$last,$ip) = split;
  if ( not $ip ) {
    $ip = `host ${sbx}.ecnext03.local`; chomp $ip;
    $ip =~ s/^.* has address (\d+\.\d+\.\d+\.\d+)$/$1/;
	if ($ip =~ /not found/) { $ip = 'N/A'; }
  }
  printf "|%s|%s|%s|\n", $sbx, $ip, $first . " " . $last;
}

exit 0;

__END__
manta-sbx				Amber Schwartz			192.168.240.212
cjohnson-sbx			Chris Johnson
dihnen-sbx				David Ihnen
ecanales-sbx-3			Eddie Canales
ecanales-sbx-l3			Eddie Canales
jdorn-sbx				John Dorn
mbruce2-sbx				Michael Bruce
mkandasmy-sbx			Murugesan Kandasmy
nromano4-sbx			Nathan Romano
nromano5-sbx			Nathan Romano
nromano6-sbx			Nathan Romano
nromano7-sbx			Nathan Romano
nkumar-sbx				Nirmal Kumar
sbraumiller-sbx			Sarah Braumiller
skumar-sbx				Sathish Kumar
manta-sbx				Steve Fazekas			192.168.240.213
sparker2012-sbx			Steve Parker
sparker-sbx				Steve Parker


LAST

jjoo-sbx				Jae Joo
jmindek-sbx				Jerry Mindek
ewilson-sbx				Eric Wilson

mkarangula-sbx ????

 83.241.168.192 build-test001-sbx
 84.241.168.192 build-test002-sbx
232.240.168.192 dataqa-sbx
167.240.168.192 gpullen-sbx
 48.241.168.192 jshemas-sbx
108.240.168.192 mlaster0-sbx
199.240.168.192 search-lab-sbx
 68.241.168.192 psalcido-sbx

 58.241.168.192 dihnen-sbx
 71.241.168.192 ecanales-sbx-3
 75.241.168.192 ecanales-sbx-l3
 76.241.168.192 jdorn-sbx
212.240.168.192 manta-sbx
213.240.168.192 manta-sbx
 24.241.168.192 mbruce2-sbx
217.240.168.192 mkandasmy-sbx
 54.241.168.192 mkarangula-sbx
239.240.168.192 nkumar-sbx
 29.241.168.192 nromano4-sbx
 31.241.168.192 nromano5-sbx
 32.241.168.192 nromano6-sbx
 67.241.168.192 nromano7-sbx
 60.241.168.192 sbraumiller-sbx
240.240.168.192 skumar-sbx
 63.241.168.192 sparker2012-sbx
 35.241.168.192 sparker-sbx

