#!/usr/bin/perl
#
# A perl-5 script to remove html tags
#
$name = $0; $name =~ s'.*/''; # remove path--like basename
$usage = "usage:\n$name";

$/=''; $*=1; #enable paragraph mode & mulitline pattern matching.

while (<>) {
# if ( /^\s*$|^$/ ) { print; next; }
  s/<[^>]+>/ /g;
  s/\&nbsp;/ /g;
  s/\&copy;/\@/g;
  s/\&gt;/>/g;
  s/\&lt;/</g;
  s/\&amp;/&/g;
  s/\&quot;/"/g;
  s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
  s/\&\#(10);//eg;
  s/\&\#(\d+);/chr($1)/eg;
  s,^\s*|[ \t]*$,,g;
  s,\s\s+, ,g;
  s,\&,&\n,g;
  s,\?,?\n,g;
  print $_;
}

exit 0;

__END__
