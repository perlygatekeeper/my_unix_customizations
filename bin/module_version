#!/usr/bin/env perl
# A perl script to report perl module version
# given input as command-line arguments or
# any of 8 environment variables

my $name = $0; $name =~ s'.*/''; # remove path--like basename
my $usage = "usage:\n$name [ ModuleName ... ] ( will also use environment variables m, mod or module case insensitively ) ";

use strict;
use warnings;

my @modules = @ARGV;
foreach my $environment_variables ( qw( m M mod Mod MOD module Module MODULE ) ) {
  if ( exists $ENV{$environment_variables} ) {
    push ( @modules, $ENV{$environment_variables}) ;
  }
}
unless ( scalar @modules ) { die $usage; }

foreach my $module (@modules) {
  my $cmd = "perl -M${module} -le 'print \$${module}::VERSION;'";
  print "$cmd\n";
  my $returned=`perl -M$m -le "print \$"$m"::VERSION;"`;
}

exit 0;

__END__
